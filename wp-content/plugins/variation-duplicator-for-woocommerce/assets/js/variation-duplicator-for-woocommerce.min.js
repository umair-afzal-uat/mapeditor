!function(e){var o={};function t(i){if(o[i])return o[i].exports;var a=o[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=o,t.d=function(e,o,i){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var a in e)t.d(i,a,function(o){return e[o]}.bind(null,a));return i},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="/",t(t.s=0)}([function(e,o,t){t(1),e.exports=t(2)},function(e,o){function t(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function i(e,o){for(var t=0;t<o.length;t++){var i=o[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,o,t){return o&&i(e.prototype,o),t&&i(e,t),e}jQuery((function(e){"use strict";var o=function(){function o(){t(this,o)}return a(o,null,[{key:"init",value:function(){var o=this;this.setOption(),this.events(),e("#woocommerce-product-data").on("woocommerce_variations_loaded",(function(){o.setCloneWrapper(),o.setSelect2()})),e("#variable_product_options").on("woocommerce_variations_added",(function(){o.setCloneWrapper(),o.setOption(),o.events(),o.setSelect2()}))}},{key:"setCloneWrapper",value:function(){e(".woocommerce_variation").each((function(){var o=e(this).find(".options:first");e(this).find(".woo-variable-image-duplicator-wrapper").insertBefore(o)}))}},{key:"setSelect2",value:function(){var o=this;try{e(":input.variable-image-duplicate-select").filter(":not(.enhanced)").each((function(t,i){var a={minimumResultsForSearch:10,allowClear:!!e(i).data("allow_clear"),placeholder:e(i).data("placeholder"),templateResult:o.imgCloneFormFormat,templateSelection:o.imgCloneFormFormat};e(i).select2(a).addClass("enhanced")}))}catch(e){console.log("Select2 Error: ",e)}}},{key:"imgCloneFormFormat",value:function(o){if(!o.id)return o.text;var t=e(o.element).data("thumbnail_url");return t?e('<img class="variation-duplicator-thumbnail-image-preview" src="'+t+'" alt=" '+o.text+'" width="30" height="30"/> <span class="variation-duplicator-thumbnail-image-text">'+o.text+"</span>"):o.text}},{key:"setOption",value:function(){var o=e("#field_to_edit"),t=o.find("option:first");o.find("option.woo_variation_duplicate_option").insertAfter(t)}},{key:"events",value:function(){e("#variable_product_options").on("click",":input.variable-image-duplicate-type",this.chooseType).on("click","button.select_all_variations",this.selectAll).on("click","button.select_no_variations",this.selectNone).on("change",":input.upload_image_id",this.clearChooseType)}},{key:"clearChooseType",value:function(o){e(this).closest(".woocommerce_variable_attributes").find(".woo-variable-image-duplicator-wrapper .variable_image_duplicate_type_form_field :radio").prop("checked",!1),e(this).closest(".woocommerce_variable_attributes").find(".woo-variable-image-duplicator-wrapper .variable-list").removeClass("show")}},{key:"chooseType",value:function(o){var t=e(this).val();if(e(this).closest(".woo-variable-image-duplicator-wrapper").find(".variable-list").removeClass("show"),"to"===t){var i=parseInt(e(this).closest(".woocommerce_variation").find(":input.upload_image_id").val(),10);if(isNaN(i)||i<1)return void e(this).closest(".woo-variable-image-duplicator-wrapper").find(".variable-image-duplicate-to-notice").addClass("show")}e(this).closest(".woo-variable-image-duplicator-wrapper").find(".variable-image-duplicate-"+t).addClass("show")}},{key:"selectAll",value:function(o){o.preventDefault(),e(this).closest("p").find("select > option").prop("selected",!0),e(this).closest("p").find("select").trigger("change")}},{key:"selectNone",value:function(o){o.preventDefault(),e(this).closest("p").find("select > option").prop("selected",!1),e(this).closest("p").find("select").trigger("change")}}]),o}(),i=function(){function o(){t(this,o)}return a(o,null,[{key:"init",value:function(){var o=this;this.setHowTo(),e(document).on("click","input.variation_is_cloneable",this.cloneableClick),e(document).on("change","input.variation_is_cloneable",this.cloneableChange),e("select.variation_actions").on("woo_variation_duplicate_ajax_data",this.ajaxData),e(document).on("woocommerce_variations_added","#variable_product_options",this.clean),e(document).on("woocommerce_variations_removed","#woocommerce-product-data",this.clean);var t=e._data(document.body,"events").change.filter((function(e){return"#variable_product_options .woocommerce_variations :input"===e.selector}))[0];e(document.body).off("change input","#variable_product_options .woocommerce_variations :input"),e(document.body).on("change input","#variable_product_options .woocommerce_variations :input:not(.no-track-change)",t.handler),e("#variable_product_options").on("woocommerce_variations_added",(function(){o.setHowTo(),e("select.variation_actions").off("woo_variation_duplicate_ajax_data").on("woo_variation_duplicate_ajax_data",o.ajaxData)})).on("woocommerce_variations_input_changed",(function(o){var t=this;_.delay((function(){e(t).find(".variation-needs-update input.variation_is_cloneable").prop("checked",!1)}),1)}))}},{key:"setHowTo",value:function(){var o=e("#variable_product_options_inner .toolbar-top").find(".do_variation_action");e("#variable_product_options_inner").find(".variation-duplicator-for-woocommerce-works").insertAfter(o),e("select#field_to_edit").on("change",(function(){"woo_variation_duplicate"===e(this).val()?e("#variable_product_options_inner").find(".variation-duplicator-for-woocommerce-works").addClass("show"):e("#variable_product_options_inner").find(".variation-duplicator-for-woocommerce-works").removeClass("show")}))}},{key:"clean",value:function(){e(".woocommerce-notice-invalid-variation, .woo-variation-duplicator-notice").remove()}},{key:"ajaxData",value:function(o){var t={items:[],times:1,exceed:!1},i=e("input.variation_is_cloneable:checked");if(i.length<1)return alert(WooVariationDuplicator.noCheckedText),o.clone={};if(i.each((function(){t.items.push(e(this).val())})),!(t.items.length>0))return o.clone={};var a=Number(window.prompt(WooVariationDuplicator.limitText,1));if(isNaN(a))return o.clone={};t.times=a>Number(WooVariationDuplicator.limit)?1:a,t.exceed=a>Number(WooVariationDuplicator.limit);for(var n=t.times*t.items.length,r=0;r<n;r++)e("#variable_product_options").trigger("woocommerce_variations_added",1);return o.clone=t}},{key:"cloneableClick",value:function(o){e(this).is(":checked")?(e("select#field_to_edit").val("woo_variation_duplicate").trigger("change"),e(this).closest("label.clone-checkbox").addClass("checked"),e("#variable_product_options_inner").find(".variation-duplicator-for-woocommerce-works").addClass("show")):(e("input.variation_is_cloneable:checked").length<1&&(e("#variable_product_options_inner").find(".variation-duplicator-for-woocommerce-works").removeClass("show"),e("select#field_to_edit").val("add_variation").trigger("change")),e(this).closest("label.clone-checkbox").removeClass("checked"))}},{key:"cloneableChange",value:function(o){e(this).closest(".wc-metaboxes-wrapper").find(".wc-metabox > .wc-metabox-content").hide(),e(this).closest(".woocommerce_variations").find(".woocommerce_variation.open").removeClass("open").addClass("closed")}}]),o}();o.init(),i.init()}))},function(e,o){}]);